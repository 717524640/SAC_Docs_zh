\section{readtable}
\label{cmd:readtable}

\SACTitle{概要}
从磁盘读取按列排列的字符数字型数据文件到内存

\SACTitle{语法}
READTABLE [options] [filelist]

其中options为:
\begin{itemize}
\item MORE
\item TRUST ON|OFF
\item COMMIT|ROLLBACK|RECALLTRACE
\item DIR CURRENT|name  
\item FREE|FORMAT text ****注:目前FORMAT选项不可用****
\item CONTENT text
\item HEADER number
\end{itemize}
所有的选项必须位于filelist之前。最后两个选项可以放在文件自己的第一行

\SACTitle{输入}
\begin{itemize}
\item MORE : 将新文件添加到内存中老文件之后，如果这个选项忽略，则新数据将替代老数据。注意：如果MORE选项没有指定则COMMIT, ROLLBACK和RECALLTRACE不起作用 
\item TRUST ON|OFF : 这个选项用于解决将文件从SAC转换到CSS格式过程中出现的问题。当转换数据时，匹配的事件id意味着文件含有相同的事件信息，或者可能是两个不同格式合并之后出现的干扰。当TRUST打开时，SAC将更有可能接受匹配事件id作为相同的事件信息，这依赖于READ命令与当前内存中数据的历史。
\item COMMIT|ROLLBACK|RECALLTRACE 参见具体章节 
\item DIR CURRENT : 从当前目录读取所有简单文件名，这个目录是你启动SAC的目录 
\item DIR name : 从目录name中读取全部简单文件，其可以为绝对/相对路径 
\item FREE : 用自由格式读取文件列表中的数据（以空格分割）
\item FORMAT text :以固定格式读取文件列表中的数据，格式声明放在text中0 
\item CONTENT text : 定义数据每列的内容，关于text见下 
\item HEADER : 文件中有几个头段行需要跳过 
\item filelist : 字符数字型文件列表
\end{itemize}

\SACTitle{缺省值}
READTABLE COMMIT FREE CONTENT Y. DIR CURRENT

\SACTitle{说明}
READ命令将二进制文件读入内存，这个命令用于读取字符数字型文件，这些数据文件可以是固定格式或自由格式。它们可能包含多个数据集，一旦读入了内存就可以用WRITE命令创建SAC二进制数据文件。

这个命令最简单的使用就是一个输入一个Y数据集，这也是默认的。X-Y对也可以通过修改content的内容读入。这个命令可以被用于直接读取其他程序输出的复杂格式数据。也可以用这个方法读入多个Y数据集，但只允许一个X数据集。

处理过程中最基本的头段变量将被计算，包括NPTS,B,E,DELTA,LEVEN,DEPMIN,DEPMAX和DEPMIN。如果只有一个Y数据集，内存中的数据文件名将和那个字符数据型磁盘文件名相同。如果有多个Y数据集，则在文件名之加上一个两位数字。	

字符数字型数据文件的每一行都将以自由格式或声明的格式读入。每行最多160个字符。content选项用于决定对于数据每行的每个输入该如果处理。在content text中的每个字符分别代表了不同的数据元素，这些字符的顺序与数据中每行的输入所代表的含义相对应。content字段允许的字符如下:
\begin{itemize}
\item Y: 下一个输入属于Y(因变量)数据集
\item X: 下一个输入属于X(自变量)数据集
\item N: 下一个输入属于数据集
\item P: 下一对输入使用X-Y数据集
\item R: 下一对输入使用Y-X数据集
\item I: 忽略这个输入
\end{itemize}

还有一个重复计数器可以跟在上面的任何字符之后。这个重复计数器是一个1位或2位整数，其代表重复前面那个字符多少次，``.''是一个无穷次重复的计数器，其只能出现在content的text的最后，意味着最后一个字符可以表示接下来的所有输入列。

\SACTitle{例子}
为了读取一个或多个自由格式的X-Y数据对：
\begin{SACCode}
SAC> READTABLE CONTENT P. FILEA
\end{SACCode}
你不能在文件行之间打断一个X-Y数据对。假设你有一个包含了格式化数据的文件，在每行的中间有一个X-Y数据对。每行的其它数据都没有用。假设每行Y数据在X数据之前，一旦正确的格式声明给出了，就可以用下面的命令:
\begin{SACCode}
SAC> READTABLE CONTENT R FORMAT \(24X,F12.3,14X,F10.2\) FILEB
\end{SACCode}
注意：在左括号和右括号两边的"\"是SAC的转义字符，这很重要，因为SAC使用括号作为内联函数。由于没有重复计数器，因而只有一个Y-X数据对被从文件的每行读入。

假设你有一个文件FILEC，其每行包括一个X值和7个不同数据集的Y值，其为(8F10.2)格式。为了在内存中创建7个不同的数据集，可以使用下面的命令：
\begin{SACCode}
SAC> READTABLE CONTENT XN . FORMAT \(8F10.2\) FILEC
\end{SACCode}
这将在内存中产生7个不同的数据文件，其名称分别为FILEC01, FILEC02等等。

现在假设你不想读入第5个Y数据集，可以执行下面的命令:
\begin{SACCode}
SAC> READTABLE CONTENT XN6 FORMAT \(5F10.20X,2F10.2\) FILEC
\end{SACCode}
另一个可以少敲键盘但是稍微低效一点的命令如下:
\begin{SACCode}
SAC> READTABLE CONTENT XN4IN2 FORMAT \(8F10.2\) FILEC
\end{SACCode}

\SACTitle{错误消息}
\begin{itemize}
\item[-]1301: 未读入数据文件
	\begin{itemize}
  	\item[-]未给出要读入的文件列表
	\item[-] 文件列表中的文件不可读
	\end{itemize}
\item[-]1020: 无效的内联函数名:
\item[-]1320: 可用内存不足以读取文件
\item[-]1314: 数据文件列表不得以数字开始
\item[-]1315: 数据文件列表的文件最大个数为1000
\end{itemize}

\SACTitle{警告消息}
\begin{itemize}
\item[-]0101: 打开文件
\item[-]0108: 文件不存在
\end{itemize}

\SACTitle{头段变量改变}
B, E, DELTA, LEVEN, DEPMIN, DEPMAX, DEPMEN.

\SACTitle{相关命令}
READ, WRITE, COMMIT, ROLLBACK, RECALLTRACE

\SACTitle{最近修订}
Oct. 27, 1998 (Version 0.58)
